<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Legal Interest Calculator</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" 
    integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/css/select2.min.css" rel="stylesheet"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/js/select2.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>  
        <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Alfa+Slab+One&display=swap" rel="stylesheet">
    
    <style>

        body{
            text-align: center;
            overflow-x: hidden;
        }
        h2 {
            text-align: center;   
            color: black; 
            font-family: 'Alfa Slab One', cursive;
        }

        h6 {
            color: black; 
            font-family: Arial, Helvetica, sans-serif;
        }

        h5 {
            color: black; 
            font-family: Arial, Helvetica, sans-serif;
        }

        .center {
            margin-left: auto;
            margin-right: auto;
        }

        input.placeholder {
            text-align: center;
        }

        input[type="checkbox"]:focus{
        outline:none !important; }

         .topnav {

         background-color: rgb(51, 51, 51);
         overflow: hidden;
         position: sticky;
         }

         .topnav a {
         float: left;
         color: #f2f2f2;
         text-align: center;
         padding: 22px 5%;
         text-decoration: none;
         font-size: 17px;
         height: 110px;
         }

        #days{
            color: white;
        }

        .input-symbol-euro {
        position: relative;
        }
        .input-symbol-euro input {
            padding-left:18px;
        }
        .input-symbol-euro:before {
            position:absolute;
     
            content:"£";
            left: 5px;
            font-size: x-large;
            font-weight: bold;
            bottom: -9px;
        }

        .input-symbol-percentage {
        position: relative;
        }
        .input-symbol-percentage input {
            padding-left:18px;
        }
        .input-symbol-percentage:after {
            position: absolute;
    
            content:"%";
            left: 100px;
            font-size: x-large;
            font-weight: bold;
            bottom: -9px;
        }

        .featuredBtn.active {
            background-color: goldenrod;
            color: black;
        }

        .featuredBtn {

            color: #8c8c8c;
            background-color: #f4efeb;
            border: none;
            outline: none;
        }

        u {
            text-decoration: none;
            border: 1px solid black;
        }​


            </style>
        </head>
        <body>
        <div class="topnav">
            <a href="/" onclick='showHome();' style="width: 100%; background-color: white; 
            font-family: Arial, Helvetica, sans-serif; color: black;"><h3>
                <u><b>SEASONED SYSTEMS</b></u></h3><h4>Interest Calculator</h4></a>
        </div>
        <div class="row">

<div style="min-width: 50%">
    <button type="button" class="btn btn-dark" style="width: 100%;" onclick="showHide('calculate')">
    <b>Calculate Interest</b>
    </button>

</div>
    

<div style="min-width: 50%">
    <button type="button" class="btn btn-dark"  
    style="width: 100%;" <a onclick="(information())"><b>Information</b></a>
      
    </button>
</div>
    
<form id="calculate" action="/calculate" method="GET">
            
</form>

<form id="information" action="/applications" method="GET">

</form>

</div>
<br><br>
<button id='£' class="featuredBtn active" style="width: 40px;" onclick="currency('£')"><b>£</b></button>
<button id='$' class="featuredBtn" style="width: 40px; margin-right: 0.01%;" onclick="currency('$')"><b>$</b></button>
<button id='€' class="featuredBtn" style="width: 40px; margin-right: 0.01%" onclick="currency('€')"><b>€</b></button>
<button id='¥' class="featuredBtn" style="width: 40px; margin-right: 0.01%" onclick="currency('¥')"><b>¥</b></button>
<button id='Dh' class="featuredBtn" style="width: 40px;" onclick="currency('Dh')"><b>Dh</b></button>
<button id='₩' class="featuredBtn" style="width: 40px;; margin-right: 0.01%" onclick="currency('₩')"><b>₩</b></button>
<br><br>
<form id="subform" action="/showAnswer" method="POST">
    <table class="center" id="center1">
        <tr>
            <td><label for="base0"></label><h6>AMOUNT</h6></td>
            <td><label for="interest0"></label><h6>INTEREST RATE</h6></td>
        </tr>
        <tr>
            <td>
                <span class="input-symbol-euro">
                    <input type="number" onchange="setTwoNumberDecimal(this)"  
                    id="base0" name="base0" step ="any" style="width: 160px; text-align: center;" required>
                </span></td>
            <td>
                <span class="input-symbol-percentage">
                    <input type="number" name="interest0" step ="any" list="interest" style="width: 160px; 
                    height: 30px; text-align: center;" required/>
                    <datalist id="interest">
                        <option value="8" selected="selected">Default Judgment (8%)</option>
                        <option value="10">Enhanced Interest (10%)</option>
                        <option value="2">General Damages (2%)</option>
                    </datalist>

                </span>
                  
            </td>
        </tr>

        
    </table>
    <br>
    <table class="center" id="center2">
    
        <tr>
            <td><label for="commence0"><h6>COMMENCING</h6></label></td>
            <td><label for="terminate0"><h6>TERMINATING</h6></label></td>
            <td><label for="saver" style="display: none;"><h6>TERMINATING</h6></label></td>
        </tr>

        <tr>
            <td><input type="date" id="commence0" name="commence0" style="width: 160px; text-align: center;" 
                 required></td>
            <td><input type="date" id="terminate0" name="terminate0" style="width: 160px; text-align: center;"
                 required></td>
            
        </tr>
        <tr>
            <td><input type="text" id="saver" name="saver" style="display:none;" value="£" 
                placeholder="Select Finish" 
                onfocus="(this.type='date')" onblur="(this.type='text')"></td>
        </tr>
    </table>
    <table class="center" id="center3">
        
    </table>
    <br>
    <table class="center" id="center4">
        
    </table>
 
    <h4 style="color: black;"><a onclick="addDate()" style="font-size: xx-large; color: green; margin-left: 8px; 
        margin-right: 2px;"><b>+</b></a>DATE  
        <a onclick="deleteDate()" style="font-size: xx-large; color: red;"><b>-</b></a><br>
        <a onclick="addpoa()" style="font-size: xx-large; color: green; margin-left: 8px; margin-right: 5px;"><b>+</b></a>POAs
        <a onclick="deletePOA()" style="font-size: xx-large; color: red;"><b>-</b></a><br>
        <a onclick="addRateDate()" style="font-size: xx-large; color: green; margin-left: 8px; margin-right: 5px;"><b>+</b></a>RATE
        <a onclick="deleteDate()" style="font-size: xx-large; color: red;"><b>-</b></a></h4><br>
    <tr>
        <td><input type="button" onclick="myFunction();" class="btn btn-dark active" value="Calculate" style="width:320px"></td>
    </tr>
    
</table></form><br>


                                                    
      <script>

        var dateorder = true;
        var datecount = 0;

function myFunction(){
    var commy = document.querySelectorAll('[id=commence0]');
    var termy = document.querySelectorAll('[id=terminate0]');
    var payee = document.querySelectorAll('[id=receive]');
   

    console.log(payee[0] == null);
    

    console.log(commy[0].value);
    console.log(termy.length);

    if (payee[0] == null){
        dateorder = true;
        for (i=0; i<commy.length; i++){
        if (commy[i].value > termy[i].value){

            var claimant = 
            '<div style="text-align: justify; text-justify: inter-word;">'+
            'You have not entered dates chronologically. Go back and try again';
            

            Swal.fire({
                title: 'Error!',
                html: claimant,
                icon: 'error',
                confirmButtonText: 'Okay'
                
            })

            dateorder = false;

        }
    }
} else {
    dateorder = true;
    var poainside = true;
    for (i=1; i<payee.length; i++){
        if (payee[i].value < payee[i-1].value){

            var claimant = 
            '<div style="text-align: justify; text-justify: inter-word;">'+
            'You have not entered dates chronologically. Go back and try again';
            

            Swal.fire({
                title: 'Error!',
                html: claimant,
                icon: 'error',
                confirmButtonText: 'Okay'
                
            })

            dateorder = false;

        }
    }

    for (i=0; i<commy.length; i++){
        if (commy[i].value > termy[i].value){

            var claimant = 
            '<div style="text-align: justify; text-justify: inter-word;">'+
            'You have not entered dates chronologically. Go back and try again';
            

            Swal.fire({
                title: 'Error!',
                html: claimant,
                icon: 'error',
                confirmButtonText: 'Okay'
                
            })

            dateorder = false;

        }
    }

    for (p=0; p < payee.length; p++){
            if (payee[p].value < commy[0].value || payee[p].value > termy[termy.length - 1].value){
                poainside = false;
            } else{
                console.log('true');
            }
        
    }


    if (poainside == false){

        var claimant = 
        '<div style="text-align: justify; text-justify: inter-word;">'+
        'You have entered a payment on account out of the range of the date periods. If a payment was received'+ " "+
        'prior to the entitlement period then you should reduce the base amount accordingly'+
        '<br><br>'+
        'If it was received afterwards, then it should not be included as it does not detract from the interest'+ " "+ 
        'entitlement for the applicable period';
        
        Swal.fire({
            title: 'Error!',
            html: claimant,
            icon: 'error',
            confirmButtonText: 'Okay'
            
        })

    }

}

    if (dateorder == true && poainside != false){
            document.getElementById('subform').submit();
        }
    
}

    $("button").click(function() {
        $("button").removeClass("active");
        $(this).addClass("active");
    });


        function information(){
            var claimant = 
            '<div style="text-align: justify; text-justify: inter-word;">'+
            '<br>' +
            '<br>' +
            '<b>SCOPE</b>'+'<br>' +'<br>' +
            'It is important to enter dates chronologically, for both the date periods and '+" "+
            'also the dates that payments on account were received. For example, if two payments'+" "+
            'on account were received on 01/12/2020 and 15/06/2020, then the date period on 15 June'+ " "+
            'is the first date period that should be entered into the calculator as that is the earliest date'+
            '<br>' +
            '<br>' +
            '<b>CURRENCY</b>'+
            '<br>' +
            '<br>' +
            'If you would like to use an alternative currency, you can choose from a selection of 6 different'+" "+
            'popular currencies to use by clicking on the selection above the calculator'+
            '<br>' +
            '<br>' +
            '<b>RATES</b>'+
            '<br>' +
            '<br>' +
            'It is possible to include numerous rates into this calculator, which is useful in situations'+" "+
            'like Part 36 success when you are entitled to enhanced interest for a specific period of the case'+
            '<br>' +
            '<br>' +
            '<b>MULTIPLE DATES, POAs and RATES</b>'+
            '<br>' +
            '<br>' +
            'Functionality is provided on the calculator to add or delete dates, poas or rates for the calculation'+ " "+
            'by clicking on the "+" and "-" operators shown in the calculator';

            Swal.fire({
                title: 'Information',
                html: claimant,
                icon: 'info',
                confirmButtonText: 'Okay'
                
            })

        }

         
          var count = 0;
          var poacount = 0;
          var updatecurrency = '£';
          
          

          function currency(money){
            var newValue = money;//coming from somewhere
            var add = '<style>.input-symbol-euro:before{content:"'+newValue+'"!important;}</style>';
           
            $('body').append(add);
             document.getElementById('saver').value = newValue;

             updatecurrency = newValue;
            
          }

          function addDate() {
              datecount++

            if (count == 0){
                var table = document.getElementById("center2");
            } else{
                var table = document.getElementById("center3");
            }
              
              var row = table.insertRow(-1);
              var cell1 = row.insertCell(0);
              var cell2 = row.insertCell(1);
              cell1.innerHTML = `<td><input type="date" id="commence0" name="commence`+count+`" style="width: 160px; 
                text-align: center;" required></td>`;
              cell2.innerHTML = `<td><input type="date" id="terminate0" name="terminate`+count+`" style="width: 160px; 
                text-align: center;" required></td>`;
            }

          function deleteDate(){
              console.log(datecount);
            if (count > 0 && datecount >= 1){
                var myobj = document.getElementById("center3");
                myobj.deleteRow(-1);
                datecount--;
            } else if (count==0 && datecount >= 1){
                var myobj = document.getElementById("center2");
                myobj.deleteRow(-1);
                datecount--;
            }
        }

        function deletePOA(){
            if (poacount > 1){
                var myobj = document.getElementById("center4");
                myobj.deleteRow(-1);
                poacount--;
                console.log(`poacount = ${poacount}`)
            } else if (poacount==1){
                var myobj = document.getElementById("center4");
                myobj.deleteRow(-1);
                myobj.deleteRow(-1);
                myobj.deleteRow(-1);
                poacount--;
                console.log(`poacount = ${poacount}`);

            }
            
        }

        function addRateDate(){
            datecount = 0;
            count++;
            var newForm = `<tr><td><label for="base ` + count + `"></label><h6>AMOUNT</h6>
                </td><td><label for="interest` + count + `"></label><h6>INTEREST RATE</h6></td>
                </tr><tr><td><span class="input-symbol-euro"><input type="number" onchange="setTwoNumberDecimal(this)" 
                    id="base`+count+`" name="base` + count + `" step ="any" style="width: 160px;
                text-align: center;" required></span></td><td><span class="input-symbol-percentage"><input type="number" 
                name="interest` + count +`" step ="any" list="interest" style="width: 160px; height: 30px; text-align: center;" 
                required/><datalist id="interest">
                <option value="8" selected="selected">Default (8%)</option><option value="10">Enhanced (10%)</option>
                <option value="2">General Damages (2%)</option></datalist></span></td></tr>
                </table><br><table class="center" id="center2"><tr><td><label for="commence`+count+`">
                <h6>COMMENCING</h6></label></td><td><label for="terminate`+count+`"><h6>TERMINATING</h6>
                </label></td></tr><td><label for="saver" style="display: none;"><h6>TERMINATING</h6></label></td><br>
                <tr><td><input type="date" id="commence`+count+`" name="commence` +
                count + `"style="width: 160px; text-align: center;" required></td>
                <td><input type="date" id="terminate`+count+`" name="terminate` + count + `"style="width: 160px; 
                text-align: center;" required></td><td><input type="text" id="saver" name="saver" style="display:none;" 
                    value=`+updatecurrency+`></td></tr>`;
                if (count ==0){
                    document.getElementById("center3").innerHTML = newForm;
                } else{
                    document.getElementById("center3").innerHTML += newForm;
                }
                
        }


        function addpoa(){
            if (poacount == 0){
                console.log('coming here');
                var insertpoa = `<tr><td><label for="receive"><h6>DATE RECEIVED</h6></label></td>
                <td><label for="amount"><h6>PAYMENT ON ACCT</h6></label></td></tr><tr><td><input type="date" 
                id="receive" name="receive" style="width: 160px; text-align: center;" 
                required></td><td><span class="input-symbol-euro"><input type="number" onchange="setTwoNumberDecimal(this)"
                id="amount" name="amount" step ="any" style="width: 160px;
                text-align: center;"></span></td></tr><br>`;

                document.getElementById("center4").innerHTML = insertpoa;

            } else if (poacount > 0){
                var table = document.getElementById("center4");
                var row = table.insertRow(-1);
                var cell1 = row.insertCell(0);
                var cell2 = row.insertCell(1);
                cell1.innerHTML = `<td><input type="date" 
                id="receive" name="receive" style="width: 160px; text-align: center;"  
                required></td>`
                cell2.innerHTML = `<td><span class="input-symbol-euro"><input type="number" onchange="setTwoNumberDecimal(this)"
                id="amount" name="amount" step ="any" style="width: 160px;
                text-align: center;"></span></td>`;
                
            }
            poacount++;
            console.log(`poacount = ${poacount}`)
            
        }

        function setTwoNumberDecimal(el) {
            el.value = parseFloat(el.value).toFixed(2);
        };

        function showHide(name){
            document.getElementById(name).submit();
              
          }

      </script>
</body>
</html>